<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout-admin :: layout(~{::main}, 'Quản lý voucher - Bakery', ~{::extraHead}, ~{::extraScripts})}">
<head>
    <title>Voucher - Bakery</title>
    <th:block th:fragment="extraHead">
        <script src="https://cdn.tailwindcss.com"></script>
    </th:block>
</head>
<body>
<main class="p-6 max-w-3xl mx-auto">

    <h1 class="text-2xl font-bold mb-4"
        th:text="${voucher.id} == null ? 'Thêm voucher mới' : 'Chỉnh sửa voucher'">
        Thêm voucher mới
    </h1>

    <!-- Form dùng chung cho create + edit -->
    <form th:object="${voucher}"
          th:action="${voucher.id} == null ? @{/admin/vouchers/create} : @{'/admin/vouchers/edit/' + ${voucher.id}}"
          method="post"
          class="space-y-4 bg-white p-6 rounded-lg shadow">

        <!-- Tên voucher -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Tên voucher *</label>
            <input type="text" th:field="*{name}" required
                   class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>

        <!-- Mã voucher -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Mã voucher</label>
            <input type="text" th:field="*{code}"
                   placeholder="VD: BAKERY10"
                   class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>

        </div>

        <!-- Mô tả -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Mô tả</label>
            <textarea required th:field="*{description}" rows="3"
                      class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
        </div>

        <!-- Loại giảm giá & Giá trị -->
        <div class="grid md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Loại giảm giá *</label>
                <select th:field="*{discountType}" required
                        class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option th:value="PERCENT">Giảm theo %</option>
                    <option th:value="AMOUNT">Giảm số tiền cố định</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Giá trị giảm *</label>
                <input type="number" min="0" step="1" th:field="*{discountValue}"
                       class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                <p class="text-xs text-gray-500 mt-1">
                    Nếu loại là %, nhập 10 = giảm 10%. Nếu là số tiền, nhập 20000 = giảm 20.000₫.
                </p>
            </div>
        </div>

        <!-- Điều kiện đơn hàng -->
        <div class="grid md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Đơn tối thiểu (₫)</label>
                <input type="number" min="0" step="1" th:field="*{minOrderValue}"
                       class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Số lượng tối thiểu (sp)</label>
                <input type="number" min="0" step="1" th:field="*{minTotalQuantity}"
                       class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
            </div>
        </div>

        <!-- Thời gian & trạng thái -->
        <div class="grid md:grid-cols-3 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Ngày bắt đầu</label>
                <input type="datetime-local" th:field="*{startDate}"
                       class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Ngày kết thúc</label>
                <input type="datetime-local" th:field="*{endDate}"
                       class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
            </div>
        </div>

        <!-- Nút hành động -->
        <div class="flex justify-between pt-4">
            <a th:href="@{/admin/vouchers}"
               class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">
                Quay lại danh sách
            </a>

            <button type="submit"
                    class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                Lưu
            </button>
        </div>
    </form>

</main>

<th:block th:fragment="extraScripts"></th:block>
</body>
</html>
