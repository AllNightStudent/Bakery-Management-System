<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout-admin :: layout(~{::main}, 'Quản lý voucher - Bakery', ~{::extraHead}, ~{::extraScripts})}">
<head>
    <title>Quản lý voucher</title>

    <!-- Extra CSS/JS nếu cần -->
    <th:block th:fragment="extraHead">
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            body {
                margin: 8px !important;
                line-height: normal !important;
            }
        </style>
    </th:block>
</head>

<body>
<main class="p-6">

    <h1 class="text-2xl font-bold mb-4">Danh sách voucher</h1>

    <a th:href="@{/admin/vouchers/create}"
       class="inline-block mb-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
        + Thêm voucher mới
    </a>

    <div class="overflow-x-auto bg-white shadow rounded-lg">
        <table class="min-w-full text-sm border">
            <thead class="bg-gray-100 text-gray-700">
            <tr>
                <th class="px-3 py-2 border">ID</th>
                <th class="px-3 py-2 border">Tên</th>
                <th class="px-3 py-2 border">Mã</th>
                <th class="px-3 py-2 border">Loại</th>
                <th class="px-3 py-2 border">Giá trị</th>
                <th class="px-3 py-2 border">Active</th>
                <th class="px-3 py-2 border">Thao tác</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="v : ${vouchers}" class="hover:bg-gray-50">
                <td class="px-3 py-2 border" th:text="${v.id}"></td>
                <td class="px-3 py-2 border" th:text="${v.name}"></td>
                <td class="px-3 py-2 border" th:text="${v.code}"></td>
                <td class="px-3 py-2 border" th:text="${v.discountType}"></td>
                <td class="px-3 py-2 border"
                    th:text="${#numbers.formatDecimal(v.discountValue, 0, 'COMMA', 0, 'POINT')}"></td>
                <td class="px-3 py-2 border"
                    th:text="${v.active ? 'Có' : 'Không'}"></td>

                <td class="px-3 py-2 border">
                    <a th:href="@{'/admin/vouchers/edit/' + ${v.id}}"
                       class="text-blue-600 hover:underline mr-2">Sửa</a>

                    <form th:action="@{'/admin/vouchers/delete/' + ${v.id}}" method="post" class="inline">
                        <button type="submit"
                                class="text-red-600 hover:underline"
                                onclick="return confirm('Bạn có chắc muốn xoá voucher này?');">
                            Xoá
                        </button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</main>

<th:block th:fragment="extraScripts"></th:block>
</body>
</html>
